# Commands to run on your Hetzner server (91.99.27.91)
# Copy and paste these commands one by one after connecting via SSH

# 1. Update the system
apt update && apt upgrade -y

# 2. Install Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
rm get-docker.sh

# 3. Install Docker Compose and other tools
apt install -y docker-compose-plugin git curl

# 4. Start and enable Docker
systemctl start docker
systemctl enable docker

# 5. Create project directory
mkdir -p /var/www
cd /var/www

# 6. Clone your repository
git clone https://github.com/yourHostJost/SorcerySW6.git
cd SorcerySW6

# 7. Create production environment file
cp .env.production .env

# 8. Edit the environment file (optional - set secure passwords)
# nano .env

# 9. Start Shopware with production configuration
docker compose -f docker-compose.production.yml up -d

# 10. Wait for services to start (this may take a few minutes)
echo "Waiting for services to start..."
sleep 60

# 11. Check if everything is running
docker compose -f docker-compose.production.yml ps

# 12. Test the installation
curl -I http://localhost

# 13. Set up firewall
ufw default deny incoming
ufw default allow outgoing
ufw allow ssh
ufw allow 80/tcp
ufw allow 443/tcp
ufw --force enable

echo "Setup completed! Your Shopware 6 staging environment should be available at:"
echo "http://91.99.27.91"
echo "Admin panel: http://91.99.27.91/admin"
